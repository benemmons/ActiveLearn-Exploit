if(!window.contentScriptInjected){
    contentScriptInjected = true;
    console.log("Loaded content script")
    chrome.storage.onChanged.addListener(function(changes, namespace) {
        chrome.storage.sync.get("automaticState", function (automaticStateObject) {
            chrome.storage.sync.get("properties", function (propertiesObject) {
                automaticState = automaticStateObject.automaticState
                properties = propertiesObject.properties
                console.log(properties)

                if (automaticState == "started"){
                    var wait = properties.waitDuration * 1000;
                    var exploit = function() {
                        console.log("Yeet")
                        wait += (Math.floor(Math.random() * (-properties.randomness)) + properties.randomness)*1000
                        setTimeout(exploit, wait);
                    }
                    loop = setTimeout(exploit, wait);
                }
                if (automaticState == "stopped"){
                    clearInterval(loop)
                }
            })
            
        })

    })
}

