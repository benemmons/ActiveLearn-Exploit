chrome.tabs.executeScript({
  file: 'js/automatic/exploit.js'
});

chrome.storage.sync.get("automaticState", function (automaticStateObject) {
  if (automaticStateObject == undefined) {
    chrome.storage.sync.set({
      "automaticState": "stopped"
    })
  } else {
    if (automaticStateObject.automaticState == "stopped") {
      document.getElementById("exploitAutomaticButton").innerText = "Start Auto-Exploit"
    } else {
      document.getElementById("exploitAutomaticButton").innerText = "Stop Auto-Exploit"
    }
  }
});

document.getElementById("exploitManualTaskButton").onclick = function () {
  chrome.tabs.executeScript({
    file: 'js/manual/task.js'
  })
}

document.getElementById("exploitManualActivityButton").onclick = function () {
  chrome.tabs.executeScript({
    file: 'js/manual/activity.js'
  })
}

document.getElementById("exploitAutomaticButton").onclick = function () {
  let button = document.getElementById("exploitAutomaticButton")
  if (button.innerText == "Start Auto-Exploit") {
    button.innerText = "Stop Auto-Exploit";
    chrome.storage.sync.set({
      "properties": {
        "waitDuration": document.getElementById("waitDurationProperty").value,
        "randomness": document.getElementById("randomnessProperty").value
      }
      
    })
    chrome.storage.sync.set({
      "automaticState": "started"
    })


  } else if (button.innerText == "Stop Auto-Exploit") {
    button.innerText = "Start Auto-Exploit";
    chrome.storage.sync.set({
      "automaticState": "stopped"
    })
  }
}